{
  "entities": {
    "BlogPost": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "BlogPost",
      "type": "object",
      "description": "Represents a blog post on the website.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the blog post."
        },
        "title": {
          "type": "string",
          "description": "Title of the blog post."
        },
        "content": {
          "type": "string",
          "description": "The main content of the blog post, likely in HTML or Markdown format."
        },
        "author": {
          "type": "string",
          "description": "Author of the blog post."
        },
        "publicationDate": {
          "type": "string",
          "description": "Date and time when the blog post was published.",
          "format": "date-time"
        },
        "category": {
          "type": "string",
          "description": "Category of the blog post."
        },
        "tagIds": {
          "type": "array",
          "description": "References to Tags. (Relationship: Tag N:N BlogPost)",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "title",
        "content",
        "author",
        "publicationDate",
        "category"
      ]
    },
    "Tag": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Tag",
      "type": "object",
      "description": "Represents a tag that can be applied to blog posts.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the tag."
        },
        "name": {
          "type": "string",
          "description": "Name of the tag."
        }
      },
      "required": [
        "id",
        "name"
      ]
    },
    "ContactFormSubmission": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ContactFormSubmission",
      "type": "object",
      "description": "Represents a submission from the contact form.",
      "properties": {
        "name": {
          "type": "string",
          "description": "Name of the person submitting the form."
        },
        "phone": {
          "type": "string",
          "description": "Phone number of the person submitting the form."
        },
        "email": {
          "type": "string",
          "description": "Email address of the person submitting the form.",
          "format": "email"
        },
        "appealDeadline": {
          "type": "string",
          "description": "The deadline for the appeal.",
          "format": "date-time"
        },
        "fileUrl": {
          "type": "string",
          "description": "URL of the uploaded decision file in Firebase Storage.",
          "format": "uri"
        },
        "submissionDate": {
          "type": "string",
          "description": "Date and time when the form was submitted.",
          "format": "date-time"
        }
      },
      "required": [
        "name",
        "phone",
        "email",
        "appealDeadline",
        "fileUrl",
        "submissionDate"
      ]
    },
    "Image": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Image",
      "type": "object",
      "description": "Represents an image in the image gallery.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the image."
        },
        "title": {
          "type": "string",
          "description": "Title of the image."
        },
        "description": {
          "type": "string",
          "description": "Description of the image."
        },
        "url": {
          "type": "string",
          "description": "URL of the image file.",
          "format": "uri"
        },
        "uploadDate": {
          "type": "string",
          "description": "Date and time when the image was uploaded.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "title",
        "url",
        "uploadDate"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/blog_posts/{blogPostId}",
        "definition": {
          "entityName": "BlogPost",
          "schema": {
            "$ref": "#/backend/entities/BlogPost"
          },
          "description": "Stores blog posts. Publicly accessible for reading.",
          "params": [
            {
              "name": "blogPostId",
              "description": "Unique identifier for the blog post."
            }
          ]
        }
      },
      {
        "path": "/tags/{tagId}",
        "definition": {
          "entityName": "Tag",
          "schema": {
            "$ref": "#/backend/entities/Tag"
          },
          "description": "Stores tags for blog posts.",
          "params": [
            {
              "name": "tagId",
              "description": "Unique identifier for the tag."
            }
          ]
        }
      },
      {
        "path": "/contact_form_submissions/{contactFormSubmissionId}",
        "definition": {
          "entityName": "ContactFormSubmission",
          "schema": {
            "$ref": "#/backend/entities/ContactFormSubmission"
          },
          "description": "Stores contact form submissions. Access restricted to administrators.",
          "params": [
            {
              "name": "contactFormSubmissionId",
              "description": "Unique identifier for the contact form submission."
            }
          ]
        }
      },
      {
        "path": "/images/{imageId}",
        "definition": {
          "entityName": "Image",
          "schema": {
            "$ref": "#/backend/entities/Image"
          },
          "description": "Stores images for the image gallery. Publicly accessible for reading.",
          "params": [
            {
              "name": "imageId",
              "description": "Unique identifier for the image."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to support WebWave's core features while prioritizing security, scalability, and ease of debugging.  Authorization Independence is achieved through structural segregation and path-based ownership, avoiding the need for `get()` calls in security rules. This enhances atomic operations and simplifies debugging.\n\n1.  **Blog Posts:** Blog posts are stored in the `/blog_posts` collection. This allows for easy listing of all blog posts.  We segregate data by using a top-level collection that makes public content available.\n2.  **Tags:** Tags are stored in the `/tags` collection. This allows for easy management and association of tags with blog posts.\n3.  **Contact Form Submissions:** Contact form submissions are stored in the `/contact_form_submissions` collection. Access to this collection should be restricted to administrators only. This ensures that sensitive contact information is not publicly accessible.\n4.  **Images:** Images are stored in the `/images` collection. This allows for easy listing of all images. We segregate data by using a top-level collection that makes public content available.\n\nThis structure supports the required QAPs by using segregation and path-based ownership.  The blog posts and images are segregated into their own collections, allowing for secure list operations.  The contact form submissions are also segregated into their own collection, with restricted access."
  }
}